<!DOCTYPE html>
<html>
  <head>
      <script>
  var _hmt = _hmt || []
  ;(function() {
    var hm = document.createElement('script')
    hm.src = 'https://hm.baidu.com/hm.js?5a0acc897fd96474a2c8f4deac84611a'
    var s = document.getElementsByTagName('script')[0]
    s.parentNode.insertBefore(hm, s)
  })()
</script> 
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="Mino,前端,后端,全栈,NodeJs,JavaScript" />
    <meta name="description" content="Mino&#39;s personal blog" />
    
    <title>
      js学习笔记正则reg - Mino
    </title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/style/style.css">
  <link rel="alternate" href="/atom.xml" title="Mino" type="application/atom+xml">
</head>
  <body>
    
    <div id="post-toc" class="animated hiddenToc hide">
      <span class="title">Toc</span>
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建正则表达式"><span class="toc-text">创建正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修饰符"><span class="toc-text">修饰符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方括号"><span class="toc-text">方括号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#元字符"><span class="toc-text">元字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#量词"><span class="toc-text">量词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RegExp对象的方法"><span class="toc-text">RegExp对象的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#支持正则表达式的字符串方法"><span class="toc-text">支持正则表达式的字符串方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#exec"><span class="toc-text">exec</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#test"><span class="toc-text">test</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#search"><span class="toc-text">search</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match"><span class="toc-text">match</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace"><span class="toc-text">replace</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#split"><span class="toc-text">split</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子表达式与-和replace的妙用"><span class="toc-text">子表达式与$和replace的妙用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#例子1：当《replace的第二个参数》是函数时，在此函数中使用"><span class="toc-text">例子1：当《replace的第二个参数》是函数时，在此函数中使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#例子2：当《replace的第二个参数》是字符串时，在此字符串中使用"><span class="toc-text">例子2：当《replace的第二个参数》是字符串时，在此字符串中使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#例子3：在正则中使用"><span class="toc-text">例子3：在正则中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#经典示例"><span class="toc-text">经典示例</span></a></li></ol>
    </div>
    
    <div id="fixed-menu-wrap">
      <span class="iconfont icon-sousuo search-box menu-reset"></span>
      <span class="icon-toc menu-reset">Toc</span>
      <span class="iconfont icon-arrowup menu-reset"></span>
    </div>
    <div id="fixed-menu">
      <span class="iconfont icon-menu-"></span>
    </div>
    <div id="progress">
      <div class="line"></div>
    </div>
    <div id="search-shade" class="animated hiddenSearch hide">
      <div class="input-wrap">
        <span class="iconfont icon-sousuo search-box"></span>
        <input type="text" placeholder="Search" />
        <span class="iconfont icon-close"></span>
      </div>
      <div class="search-result">
        <div class="meta">
          <span><b id="result-count">0</b> results found</span>
          <img src="/images/logo.jpg" />
        </div>
        <ul id="result-box"></ul>
      </div>
    </div>
    <div id="menu-mask" class="animated hideMenuMask hide">
      <span class="iconfont icon-close"></span>
      <div class="nav">
        
        <a href="/" class="">
          首页
        </a>
        
        <a href="/about" class="">
          关于
        </a>
        
        <a href="/tags" class="">
          标签
        </a>
        
        <a href="/categories" class="">
          分类
        </a>
        
        <a href="/archives" class="">
          归档
        </a>
        
      </div>
    </div>
    <div id="header">
      <div class="intro">
        <a href="/" class="logo" style="background-image: url('/images/logo.jpg')"></a>
        <div class="author">Mino</div>
      </div>
      <div class="nav">
        <span class="iconfont icon-menu menu-icon"></span>
        <a href="#" class="search-box">
          <span class="iconfont icon-sousuo"></span>
        </a>
      </div>
    </div>
    <div id="side" class="animated bounceInLeft">
      <div class="shrink">
        <a href="/" class="logo" style="background-image: url('/images/logo.jpg')"></a>
        <span class="iconfont icon-menu toggle-icon"></span>
        <a href="#" class="search-box">
          <span class="iconfont icon-sousuo"></span>
        </a>
      </div>
      <div class="magnify">
        <div class="about">
          <div class="author">Mino</div>
          <a href="/" class="logo" style="background-image: url('/images/logo.jpg')"></a>
        </div>

        <div class="nav">
          
          <a href="/" class="">
            首页
          </a>
          
          <a href="/about" class="">
            关于
          </a>
          
          <a href="/tags" class="">
            标签
          </a>
          
          <a href="/categories" class="">
            分类
          </a>
          
          <a href="/archives" class="">
            归档
          </a>
          
          <a href="#" class="search-box">
            <span class="iconfont icon-sousuo"></span>
          </a>
        </div>
        <div class="bottom">
          <div class="follow">
            
            <a href="https://github.com/codermino" target="_block">
              <span class="iconfont icon-github"></span>
            </a>
            
            <a href="1227657064@qq.com" target="_block">
              <span class="iconfont icon-QQ"></span>
            </a>
             
            <a href="/atom.xml" target="_block">
              <span class="iconfont icon-rss"></span>
            </a>
            
          </div>
        </div>
      </div>
    </div>
    <div id="container">
      <div class="main animated bounceInRight delay-0.7s">
        <article class="post-entry">
    <div class="header">
      
      <div class="title">js学习笔记正则reg</div>
      <div class="meta">
        <span class="item">
          <span class="iconfont icon-time-circle"></span>
          <span>2020/08/18</span>
        </span>

        

         
        <span class="item">
          <span class="iconfont icon-folder"></span>
          <span>
              
                
                  <a href="/categories/javascript">javascript</a>
                
              
          </span>
        </span>
        
        
         
          <span class="item">
            <span class="iconfont icon-tag1"></span>
            <span>
                
                  
                    <a href="/tags/js学习笔记正则reg">js学习笔记正则reg</a>
                  
                
            </span>
          </span>
         
      </div>
      <div>
      </div>
    </div>
    <p><a href="/images/javascript/javascript.png" data-caption data-fancybox="images"><img src="/images/javascript/javascript.png" alt></a></p>
<h3 id="创建正则表达式">创建正则表达式<a class="post-anchor" href="#创建正则表达式"></a></h3><pre><code class="hljs javascript"><span class="hljs-comment">// 1. 通过构造函数生成。好处是可以支持变量</span>
<span class="hljs-comment">// 参数1 模式，描述了表达式的模式</span>
<span class="hljs-comment">// 参数2 修饰符，用于指定全局匹配、区分大小写的匹配和多行匹配</span>
<span class="hljs-keyword">var</span> suffix = <span class="hljs-string">'js'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">`[\\w\\.]+(?=\\.<span class="hljs-subst">$&#123;suffix&#125;</span>)`</span>, <span class="hljs-string">'igm'</span>);
<span class="hljs-comment">// reg ---&gt;&gt; /[\w\.]+(?=\.js)/gim</span>

<span class="hljs-comment">// 2.字面量，更为简单。但是无法支持变量。</span>
<span class="hljs-keyword">var</span> patt = <span class="hljs-regexp">/[\w\.]+(?=\.js)/gim</span>;

<span class="hljs-comment">// 注意，无论是第一种还是第二种。当需要&lt;模式&gt;匹配&lt;存在特殊含义的字符&gt;时，需要使用转义字符进行转义</span>
<span class="hljs-keyword">var</span> reg1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"\\w+"</span>);
<span class="hljs-keyword">var</span> reg2 = <span class="hljs-regexp">/\w+/</span>;
<span class="hljs-comment">// 这里两种得出的表达式等价</span></code></pre>

<h3 id="修饰符">修饰符<a class="post-anchor" href="#修饰符"></a></h3><table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>执行对大小写不敏感的匹配。</td>
<td></td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。</td>
<td></td>
<td></td>
</tr>
<tr>
<td>m</td>
<td>执行多行匹配。</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="方括号">方括号<a class="post-anchor" href="#方括号"></a></h3><table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>[abc]</td>
<td>查找方括号之间的任何字符</td>
</tr>
<tr>
<td>[^abc]</td>
<td>查找任何不在方括号之间的字符。</td>
</tr>
<tr>
<td>[0-9]</td>
<td>查找任何从 0 至 9 的数字。</td>
</tr>
<tr>
<td>[a-z]</td>
<td>查找任何从小写 a 到小写 z 的字符。</td>
</tr>
<tr>
<td>[A-Z]</td>
<td>查找任何从大写 A 到大写 Z 的字符。</td>
</tr>
<tr>
<td>[A-z]</td>
<td>查找任何从大写 A 到小写 z 的字符。</td>
</tr>
<tr>
<td>[adgk]</td>
<td>查找给定集合内的任何字符。</td>
</tr>
<tr>
<td>[^adgk]</td>
<td>查找给定集合外的任何字符。</td>
</tr>
<tr>
<td>(red|blue|green)</td>
<td>查找任何指定的选项。小括号包裹的也叫子表达式，后面在子表达式与$和replace的妙用中会详细讲到</td>
</tr>
</tbody></table>
<h3 id="元字符">元字符<a class="post-anchor" href="#元字符"></a></h3><table>
<thead>
<tr>
<th>元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>查找单个字符，除了换行和行结束符。相当于 [^\r\n] 只要不包含换行和行结束符。</td>
</tr>
<tr>
<td>\w</td>
<td>查找单词字符。相当于 [0-9A-z_] 。</td>
</tr>
<tr>
<td>\W</td>
<td>查找非单词字符。相当于 [^\w] 。</td>
</tr>
<tr>
<td>\d</td>
<td>查找数字。相当于 [0-9] 。</td>
</tr>
<tr>
<td>\D</td>
<td>查找非数字字符。相当于 [^\d] 。</td>
</tr>
<tr>
<td>\s</td>
<td>查找空白字符。相当于 [    \n\r\v\f ] (注意这里末尾有个空格)。</td>
</tr>
<tr>
<td>\S</td>
<td>查找非空白字符。相当于 [^\s] 。</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词边界。</td>
</tr>
<tr>
<td>\B</td>
<td>匹配非单词边界。</td>
</tr>
<tr>
<td>\0</td>
<td>查找 NUL 字符。</td>
</tr>
<tr>
<td>\n</td>
<td>查找换行符。</td>
</tr>
<tr>
<td>\f</td>
<td>查找换页符。</td>
</tr>
<tr>
<td>\r</td>
<td>查找回车符。</td>
</tr>
<tr>
<td></td>
<td>查找制表符。</td>
</tr>
<tr>
<td>\v</td>
<td>查找垂直制表符。</td>
</tr>
<tr>
<td>\xxx</td>
<td>查找以八进制数 xxx 规定的字符。</td>
</tr>
<tr>
<td>\xdd</td>
<td>查找以十六进制数 dd 规定的字符。</td>
</tr>
<tr>
<td>\uxxxx</td>
<td>查找以十六进制数 xxxx 规定的 Unicode 字符。</td>
</tr>
</tbody></table>
<h3 id="量词">量词<a class="post-anchor" href="#量词"></a></h3><table>
<thead>
<tr>
<th>量词</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>n+</td>
<td>匹配任何包含至少一个 n 的字符串。</td>
</tr>
<tr>
<td>n*</td>
<td>匹配任何包含零个或多个 n 的字符串。</td>
</tr>
<tr>
<td>n?</td>
<td>匹配任何包含零个或一个 n 的字符串。（取消贪婪匹配）</td>
</tr>
<tr>
<td>n{X}</td>
<td>匹配包含 X 个 n 的序列的字符串。</td>
</tr>
<tr>
<td>n{X,Y}</td>
<td>匹配包含 X 至 Y 个 n 的序列的字符串。例如： /^\w{5,8}$/ 字符串必须是单词字符。且是5-8位。</td>
</tr>
<tr>
<td>n{X,}</td>
<td>匹配包含至少 X 个 n 的序列的字符串。</td>
</tr>
<tr>
<td>n$</td>
<td>匹配任何结尾为 n 的字符串。</td>
</tr>
<tr>
<td>^n</td>
<td>匹配任何开头为 n 的字符串。</td>
</tr>
<tr>
<td>?=n</td>
<td>匹配任何其后紧接指定字符串 n 的字符串。</td>
</tr>
<tr>
<td>?!n</td>
<td>匹配任何其后没有紧接指定字符串 n 的字符串。</td>
</tr>
</tbody></table>
<h3 id="RegExp对象的方法">RegExp对象的方法<a class="post-anchor" href="#RegExp对象的方法"></a></h3><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>compile</td>
<td>编译正则表达式。</td>
</tr>
<tr>
<td>exec</td>
<td>检索字符串中指定的值。返回找到的值，并确定其位置。返回值为类数组</td>
</tr>
<tr>
<td>test</td>
<td>检索字符串中指定的值。返回 true 或 false。</td>
</tr>
</tbody></table>
<h3 id="支持正则表达式的字符串方法">支持正则表达式的字符串方法<a class="post-anchor" href="#支持正则表达式的字符串方法"></a></h3><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>search</td>
<td>检索与正则表达式相匹配的值。会自动忽略g修饰符</td>
</tr>
<tr>
<td>match</td>
<td>找到一个或多个正则表达式的匹配。返回数组</td>
</tr>
<tr>
<td>replace</td>
<td>替换与正则表达式匹配的子串。如正则表达式无g修饰符。则只替换找到的第一个符合条件的字符串</td>
</tr>
<tr>
<td>split</td>
<td>把字符串分割为字符串数组。</td>
</tr>
</tbody></table>
<h4 id="exec">exec<a class="post-anchor" href="#exec"></a></h4><p>没有g修饰符，reg.lastIndex无变化，示例</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/</span>;

<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// ["a", index: 0, input: "a12a12", groups: undefined]</span>
<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// ["a", index: 0, input: "a12a12", groups: undefined]</span>
<span class="hljs-comment">// ...一直打印相同的值</span></code></pre>
<p>有g修饰符，reg.lastIndex变化，示例</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/g</span>;

<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// ["a", index: 0, input: "a12a12", groups: undefined] 1</span>
<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// ["a", index: 3, input: "a12a12", groups: undefined] 4</span>
<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// null 0</span>
<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// ["a", index: 0, input: "a12a12", groups: undefined] 1</span>
<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// ["a", index: 3, input: "a12a12", groups: undefined] 4</span>
<span class="hljs-built_in">console</span>.log(reg.exec(str), reg.lastIndex);<span class="hljs-comment">// null 0</span>
<span class="hljs-comment">// ...循环上面结果</span>

<span class="hljs-comment">// 结论</span>
<span class="hljs-comment">// 值会更改。且reg.lastIndex显示：《下次匹配&lt;a12a12&gt;字符串时的起始下标》，index属性则记录了当前匹配结果在字符串中的起始下标</span>
<span class="hljs-comment">// 就是说。不会对已经匹配过的字符重复匹配。除非匹配到字符串尽头以至于从头开始了</span></code></pre>

<h4 id="test">test<a class="post-anchor" href="#test"></a></h4><p>没有g修饰符，reg.lastIndex无变化，示例</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-comment">//;</span>

<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// true 0</span>
<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// true 0</span>
<span class="hljs-comment">// ...一直打印相同的值</span></code></pre>
<p>有g修饰符，reg.lastIndex变化，示例</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/g</span>;

<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// true 1</span>
<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// true 4</span>
<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// false 0</span>
<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// true 1</span>
<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// true 4</span>
<span class="hljs-built_in">console</span>.log(reg.test(str), reg.lastIndex);<span class="hljs-comment">// false 0</span>
<span class="hljs-comment">// ...循环上面结果</span>

<span class="hljs-comment">// 结论</span>
<span class="hljs-comment">// 值会更改。且reg.lastIndex显示：《下次匹配&lt;a12a12&gt;字符串时的起始下标》</span>
<span class="hljs-comment">// 就是说。不会对已经匹配过的字符重复匹配。除非匹配到字符串尽头以至于从头开始了</span></code></pre>

<h4 id="search">search<a class="post-anchor" href="#search"></a></h4><pre><code class="hljs javascript"><span class="hljs-comment">// 返回《第一个符合正则的字符串下标》，不会对reg.lastIndex造成影响</span>

<span class="hljs-keyword">var</span> str = <span class="hljs-string">'12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/g</span>;<span class="hljs-comment">// 这里g修饰符会被忽略</span>
<span class="hljs-built_in">console</span>.log(str.search(reg), reg.lastIndex);<span class="hljs-comment">// 2 0</span></code></pre>

<h4 id="match">match<a class="post-anchor" href="#match"></a></h4><p>没有g修饰符，返回值类数组，且类数组内只有第一个符合条件的字符换</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// 返回《类数组》，且类数组内只有第一个符合条件的字符换，不会对reg.lastIndex造成影响</span>

<span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/</span>;
<span class="hljs-built_in">console</span>.log(str.match(reg), reg.lastIndex);<span class="hljs-comment">// ["a", index: 0, input: "a12a12", groups: undefined] 0</span></code></pre>
<p>有g修饰符，返回数组，数组内包含字符串中所有符合正则的字符串</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// 返回《数组》，数组内包含字符串中所有符合正则的字符串，不会对reg.lastIndex造成影响</span>

<span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/g</span>;
<span class="hljs-built_in">console</span>.log(str.match(reg), reg.lastIndex);<span class="hljs-comment">// ["a", "a"] 0</span></code></pre>

<h4 id="replace">replace<a class="post-anchor" href="#replace"></a></h4><p>没有g修饰符，只替换第一个</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// 只替换第一个符合正则的字符串</span>
<span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/</span>;
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">'='</span>));<span class="hljs-comment">// =12a12</span></code></pre>
<p>有g修饰符。替换所有符合正则的字符串</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// 替换所有符合正则的字符串</span>
<span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/g</span>;
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">'='</span>));<span class="hljs-comment">// =12=12</span></code></pre>

<h4 id="split">split<a class="post-anchor" href="#split"></a></h4><pre><code class="hljs javascript"><span class="hljs-comment">// 将符合正则的字符串当作数组中的逗号分隔，返回分割后的数组</span>
<span class="hljs-keyword">var</span> str = <span class="hljs-string">'a12a12'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-z]/g</span>;<span class="hljs-comment">// 此处忽略g修饰符</span>
<span class="hljs-built_in">console</span>.log(str.split(reg));<span class="hljs-comment">// ["", "12", "12"]</span></code></pre>

<h3 id="子表达式与-和replace的妙用">子表达式与$和replace的妙用<a class="post-anchor" href="#子表达式与-和replace的妙用"></a></h3><p>正则中的小括号不仅仅可以将局部正则变的独立。还可以变成子表达式，享有子表达的特有api。</p>
<p>被()包裹的正则表达式。被称为正则子表达式。<br>正则子表达式的值可以在replace第二个参数中用$1、$2….来接收结果</p>
<h4 id="例子1：当《replace的第二个参数》是函数时，在此函数中使用">例子1：当《replace的第二个参数》是函数时，在此函数中使用<a class="post-anchor" href="#例子1：当《replace的第二个参数》是函数时，在此函数中使用"></a></h4><pre><code class="hljs javascript"><span class="hljs-comment">//           子1   子2</span>
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/b(\w\d)(\d)/g</span>;
<span class="hljs-keyword">var</span> str = <span class="hljs-string">"abc19k"</span>;
str.replace(reg,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$, $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span></span>)</span>&#123;
    <span class="hljs-built_in">console</span>.log($, <span class="hljs-string">' $'</span>);<span class="hljs-comment">// 代表整个正则表达式匹配的值</span>
    <span class="hljs-built_in">console</span>.log($<span class="hljs-number">1</span>, <span class="hljs-string">' $1'</span>);<span class="hljs-comment">// 第一个子表达式匹配的值</span>
    <span class="hljs-built_in">console</span>.log($<span class="hljs-number">2</span>, <span class="hljs-string">' $2'</span>);<span class="hljs-comment">// 第二个子表达式匹配的值</span>
&#125;);
<span class="hljs-comment">// console.log所打印结果如下</span>
<span class="hljs-comment">// bc19  $</span>
<span class="hljs-comment">// c1  $1</span>
<span class="hljs-comment">// 9  $2</span></code></pre>
<h4 id="例子2：当《replace的第二个参数》是字符串时，在此字符串中使用">例子2：当《replace的第二个参数》是字符串时，在此字符串中使用<a class="post-anchor" href="#例子2：当《replace的第二个参数》是字符串时，在此字符串中使用"></a></h4><pre><code class="hljs javascript"><span class="hljs-comment">//           子1   子2</span>
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/b(\w\d)(\d)/g</span>;
<span class="hljs-keyword">var</span> str = <span class="hljs-string">"abc19k"</span>;
<span class="hljs-comment">// 此处$1是第一个子表达式结果----&gt;&gt;   c1</span>
<span class="hljs-comment">// $2则是第二个子表达式结果 -----&gt;&gt;   9</span>
<span class="hljs-comment">// 单纯的$只是一个字符串，且也是一个特殊的转义字符</span>
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">"$2"</span>));<span class="hljs-comment">// ---&gt;&gt; a9k</span>

<span class="hljs-comment">// -------------分割线-----------</span>
<span class="hljs-comment">// 如果想要将结果替换成$字符，那么需要用$来转义，而不是\</span>
<span class="hljs-comment">// 错误转义用 \</span>
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">"\$2"</span>));<span class="hljs-comment">// ---&gt;&gt; a9k   失败了，函数仍然将$2理解为一个特殊值</span>
<span class="hljs-comment">// 正确转义用 $ 以暴制暴</span>
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">"$$2"</span>));<span class="hljs-comment">// ---&gt;&gt; a$2k  转义成功</span></code></pre>

<h4 id="例子3：在正则中使用">例子3：在正则中使用<a class="post-anchor" href="#例子3：在正则中使用"></a></h4><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'aaabbbccccccccaaa'</span>;
<span class="hljs-comment">// 这里 \1 代表第一个子表达式所匹配的《结果》，(如果有第二个子表达式的话，\2则代表第二个子表达式的匹配结果....)</span>
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/(\w)\1*/g</span>;
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">'$1'</span>));<span class="hljs-comment">// abca</span></code></pre>

<h3 id="经典示例">经典示例<a class="post-anchor" href="#经典示例"></a></h3><p>从后往前数，每三位添加一个 .</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// 例如将 1234567 变成 1.234.567</span>

<span class="hljs-keyword">var</span> str = <span class="hljs-string">'1234567'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/(?=(\B)(\d&#123;3&#125;)+$)/g</span>;
<span class="hljs-built_in">console</span>.log(str.replace(reg, <span class="hljs-string">'.'</span>));<span class="hljs-comment">// ---&gt;&gt;&gt; 1.234.567</span></code></pre>

<p>排除某类字符：</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// 匹配《不包含 aaa，bbb，c2》的字符串</span>
<span class="hljs-keyword">var</span> reg  = <span class="hljs-regexp">/^((?!aaa|bbb|c2).)*$/g</span>;
<span class="hljs-comment">// 例如：</span>
<span class="hljs-keyword">var</span> str1 = <span class="hljs-string">'aaqwer'</span>;
<span class="hljs-built_in">console</span>.log(reg.test(str1));<span class="hljs-comment">// true str1不包含 aaa</span>
<span class="hljs-keyword">var</span> str2 = <span class="hljs-string">'qwc2er'</span>;
<span class="hljs-built_in">console</span>.log(reg.test(str2));<span class="hljs-comment">// false str2包含了c2</span></code></pre>

<p>将驼峰单词变成连字符单词</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'theFirstName'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/([A-Z])/g</span>;
str.replace(reg, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>)</span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'-'</span>+$.toLowerCase()
&#125;);<span class="hljs-comment">// ---&gt;&gt;&gt; "the-first-name"</span></code></pre>

<p>将连字符单词变成驼峰单词</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'the-first-name'</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/-(\w)/g</span>;
str.replace(reg, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$, $<span class="hljs-number">1</span></span>)</span>&#123;
    <span class="hljs-keyword">return</span> $<span class="hljs-number">1.</span>toUpperCase();
&#125;);<span class="hljs-comment">// ---&gt;&gt;&gt; "theFirstName"</span></code></pre>


  
    <div class="post-reward">
    <div id="reward-button">打赏</div>
      <div id="qr">
        <div class="wrap">
            
            <div class="bg-wrap">
              <a href="/images/zhifubao.png" target="_block" class="bg" style="background-image:url('/images/zhifubao.png')"></a>
              支付宝
            </div>
            
            
            <div class="bg-wrap">
                <a href="/images/weixin.png" target="_block" class="bg" style="background-image:url('/images/weixin.png')"></a>
              微信
            </div>
            
        </div>
      </div>
    </div>
  
  <div class="post-guide">
    <div class="item left">
        
          <a href="/2020/08/18/js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/">js学习笔记回收机制</a>
        
    </div>
    <div class="item right">
        
          <a href="/2020/08/18/js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E7%BB%84array/">js学习笔记数组array</a>
        
    </div>
  </div>

  

  <div class="post-copyright">
    <div class="auth">
      本文作者：<a href="https://codermino.github.io">Mino</a>
    </div>
    <div class="link">
      永久链接：<a href="https://codermino.github.io/2020/08/18/js学习笔记正则reg/">https://codermino.github.io/2020/08/18/js学习笔记正则reg/</a>
    </div>
    <div class="declare">
      版权声明：本文首发于<a href="https://codermino.github.io">Mino</a>的博客，转载请注明出处！
    </div>
  </div>

  <div id="comment"></div>

  
  
</article>
        <footer>
          <div class="copyright">
            ©2021
            <a href="https://codermino.github.io">Mino</a> Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Mino</a> |
<!--            <a href="https://github.com/shixiaohu2206/hexo-theme-huhu" target="_blank" rel="noopener">hexo-theme-huhu</a>-->
          </div>
          
        </footer>
      </div>
    </div>
  </body>
  
</html>
<script type="text/javascript">
                  window.HUHU_CONFIG = JSON.parse("{\"share\":[\"weibo\",\"weixin\",\"qqkongjian\",\"QQ\",\"douban\",\"facebook\",\"twitter\",\"google\"],\"service_worker\":{\"open\":false}}")
                </script> <script type="text/javascript">window.addEventListener('load', function() {
    
    window.loadJs = function(d, m, a) {
      var c = document.getElementsByTagName('head')[0] || document.head || document.documentElement
      var b = document.createElement('script')
      b.defer = true
      b.setAttribute('type', 'text/javascript')
      b.setAttribute('charset', 'UTF-8')
      b.setAttribute('async', 'true')
      b.setAttribute('src', d)
      m && b.setAttribute('data-main', '/scripts/app-built')
      if (typeof a === 'function') {
        if (window.attachEvent) {
          b.onreadystatechange = function() {
            var e = b.readyState
            if (e === 'loaded' || e === 'complete') {
              b.onreadystatechange = null
              a()
            }
          }
        } else {
          b.onload = a
        }
      }
      c.appendChild(b)
    }
    window.loadJs && window.loadJs('https://cdn.bootcss.com/require.js/2.3.6/require.min.js', true, function() {require.config({"paths":{"util":"util","share":"share","search":"search","registerSW":"registerSW","valine":"cdn/Valine.min","av":["https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min"],"pjax":["https://cdn.bootcss.com/jquery.pjax/2.0.1/jquery.pjax.min"],"jquery":["https://cdn.bootcss.com/jquery/3.4.1/jquery.min"],"confirm":["https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min"],"fancybox":["https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min"],"chart":["https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.bundle.min"]},"map":{"*":{"css":"https://cdn.bootcss.com/require-css/0.1.10/css.min.js"}},"shim":{"fancybox":{"deps":["css!https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css"]},"confirm":{"deps":["css!https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.css"]},"chart":{"deps":["css!https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.min.css"]}},"waitSeconds":3})})
  })</script> <script type="text/javascript">
                  ;(function() {
                    var bp = document.createElement('script')
                    var curProtocol = window.location.protocol.split(':')[0]
                    if (curProtocol === 'https') {
                      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'
                    } else {
                      bp.src = 'http://push.zhanzhang.baidu.com/push.js'
                    }
                    var s = document.getElementsByTagName('script')[0]
                    s.parentNode.insertBefore(bp, s)
                  })()
                </script> 
